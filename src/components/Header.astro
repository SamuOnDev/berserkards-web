---
import logo from "../assets/logo.png";

const { messages, basePath, switchLang, switchPath } = Astro.props;
const navLinks = messages.nav.links;
---

<header class="sticky top-0 z-50 border-b border-border bg-base/90 backdrop-blur">
  <div class="mx-auto max-w-6xl px-4">
    <div class="flex items-center justify-between py-4">
      <a href={basePath || "/"} class="flex items-center gap-3">
        <img
          src={logo.src}
          alt="Berserkards logo"
          class="h-9 w-9 object-contain"
          loading="eager"
          decoding="async"
        />
        <div class="leading-tight">
          <div class="text-sm font-semibold tracking-[0.35em]">BERSERKARDS</div>
          <div class="text-xs text-muted">One Piece JP</div>
        </div>
      </a>

      <div class="flex items-center gap-4">
        <button
          type="button"
          aria-label={messages.nav.searchLabel}
          class="rounded-full border border-border/70 bg-surface/80 p-2 text-muted hover:text-text"
        >
          <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.8">
            <circle cx="11" cy="11" r="7" />
            <path d="m20 20-3.5-3.5" />
          </svg>
        </button>
        <button
          type="button"
          aria-label={messages.nav.accountLabel}
          class="rounded-full border border-border/70 bg-surface/80 p-2 text-muted hover:text-text"
        >
          <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.8">
            <circle cx="12" cy="8" r="3.5" />
            <path d="M5 20c1.4-3.5 5-5 7-5s5.6 1.5 7 5" />
          </svg>
        </button>
        <button
          type="button"
          aria-label={messages.nav.cartLabel}
          class="rounded-full border border-border/70 bg-surface/80 p-2 text-muted hover:text-text"
        >
          <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.8">
            <path d="M6 6h15l-1.5 9H8L6 6z" />
            <path d="M6 6 5 3H2" />
            <circle cx="9" cy="20" r="1.5" />
            <circle cx="18" cy="20" r="1.5" />
          </svg>
        </button>
        <a
          href={switchPath}
          class="rounded-full border border-border/70 bg-surface/80 px-3 py-2 text-xs font-semibold tracking-[0.2em] text-muted hover:text-text"
        >
          {messages.nav.languageLabel}
        </a>
      </div>
    </div>

    <nav class="flex items-center gap-6 overflow-x-auto border-t border-border/60 py-3 text-xs uppercase tracking-[0.2em] text-muted sm:text-sm">
      {navLinks.map((link) => (
        <a
          href={`${basePath}${link.href}`}
          class={`whitespace-nowrap pb-2 transition ${link.key === messages.nav.activeKey ? "border-b-2 border-accent text-text" : "border-b-2 border-transparent hover:text-text"}`}
        >
          {link.label}
        </a>
      ))}
    </nav>
  </div>
</header>
