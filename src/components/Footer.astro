---
import { type Locale, translations } from "../i18n";
import detailLeft from "../assets/det_index_lower_left.png";
import detailRight from "../assets/det_index_lower_right.png";

type Messages = (typeof translations)[Locale];

const { messages, basePath } = Astro.props as {
  messages: Messages;
  basePath: string;
};
const currentYear = new Date().getFullYear();
const copyrightText = messages.footer.copyright.replace("{year}", String(currentYear));
const socialLinks = [
  { label: "Instagram", href: "#", icon: "M8 3h8a5 5 0 0 1 5 5v8a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5V8a5 5 0 0 1 5-5z" },
  { label: "Twitter", href: "#", icon: "M21 6.4c-.7.3-1.5.5-2.3.6.8-.5 1.4-1.2 1.7-2.1-.8.5-1.7.8-2.7 1-1.6-1.6-4.3-.3-4 2-3.2-.2-6-1.7-7.8-4.1-1 1.7-.5 3.9 1.3 4.9-.6 0-1.2-.2-1.7-.4 0 1.9 1.3 3.5 3.2 3.9-.4.1-1 .2-1.5.1.4 1.5 1.8 2.6 3.4 2.6-1.4 1.1-3.1 1.6-4.9 1.4 1.6 1 3.6 1.6 5.7 1.6 6.9 0 10.9-5.9 10.7-11.3.7-.5 1.3-1.1 1.8-1.8z" },
  { label: "Facebook", href: "#", icon: "M14 9h3V6h-3c-2 0-4 1.5-4 4v3H7v3h3v5h3v-5h3l1-3h-4v-2c0-.6.4-1 1-1z" },
  { label: "YouTube", href: "#", icon: "M20 8.5c0-1-1-2-2-2H6c-1 0-2 1-2 2v7c0 1 1 2 2 2h12c1 0 2-1 2-2v-7zM10 10l5 3-5 3v-6z" }
];
---

<footer class="relative mt-16 border-t border-border bg-base/80">
  <div class="pointer-events-none absolute left-1/2 top-0 z-10 w-full max-w-6xl -translate-x-1/2 px-4" aria-hidden="true">
    <div class="flex w-full items-center justify-between">
      <img
        src={detailLeft.src}
        alt=""
        class="h-auto w-[clamp(130px,18vw,240px)] -translate-y-1/2 object-contain"
        loading="lazy"
      />
      <img
        src={detailRight.src}
        alt=""
        class="h-auto w-[clamp(130px,18vw,240px)] -translate-y-1/2 object-contain"
        loading="lazy"
      />
    </div>
  </div>

  <div class="mx-auto grid max-w-6xl gap-10 px-4 py-12 text-sm sm:grid-cols-3">
    <div>
      <div class="text-xs uppercase tracking-[0.3em] text-muted">{messages.footer.customerService.title}</div>
      <p class="mt-3 text-sm font-semibold text-text">{messages.footer.customerService.cta}</p>
      <a href={`mailto:${messages.footer.customerService.email}`} class="mt-2 inline-flex text-xs text-muted hover:text-text">
        {messages.footer.customerService.email}
      </a>
    </div>

    <div>
      <div class="text-xs uppercase tracking-[0.3em] text-muted">{messages.footer.info.title}</div>
      <ul class="mt-4 space-y-2 text-xs text-muted">
        {messages.footer.info.links.map((item) => (
          <li><a class="hover:text-text" href={`${basePath}${item.href}`}>{item.label}</a></li>
        ))}
      </ul>
    </div>

    <div>
      <div class="text-xs uppercase tracking-[0.3em] text-muted">{messages.footer.socialTitle}</div>
      <div class="mt-4 flex items-center gap-3">
        {socialLinks.map((link) => (
          <a
            href={link.href}
            aria-label={link.label}
            class="flex h-9 w-9 items-center justify-center rounded-full border border-border/70 bg-surface/70 text-muted hover:text-text"
          >
            <svg viewBox="0 0 24 24" class="h-4 w-4" fill="currentColor" aria-hidden="true">
              <path d={link.icon} />
            </svg>
          </a>
        ))}
      </div>
    </div>
  </div>

  <div class="border-t border-border">
    <div class="mx-auto max-w-6xl px-4 py-6 text-center text-xs text-muted">
      <p>{copyrightText}</p>
      <p class="mt-1">{messages.footer.designCredit}</p>
    </div>
  </div>
</footer>
